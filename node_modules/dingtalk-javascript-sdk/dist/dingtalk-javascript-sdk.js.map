{"version":3,"file":"dingtalk-javascript-sdk.js","sources":["../src/package/dingtalk-sdk-exec/android_exec.js","../src/package/dingtalk-sdk-exec/ios_exec.js","../../dingtalk-javascript-utility/src/package/dingtalk-querystring/index.js","../../dingtalk-javascript-utility/src/package/dingtalk-url/index.js","../../dingtalk-javascript-utility/src/package/dingtalk-env/index.js","../../dingtalk-javascript-utility/src/package/dingtalk-require/index.js","../../dingtalk-javascript-utility/src/package/dingtalk-timer/index.js","../../dingtalk-javascript-utility/src/package/dingtalk-log/index.js","../../dingtalk-javascript-utility/src/local.index.js","../src/package/dingtalk-sdk-exec/web_exec.js","../src/package/dingtalk-sdk-exec/index.js","../src/package/dingtalk-sdk-ship/global-api/EventEmitter.js","../src/package/dingtalk-sdk-ship/core/parseJsApis.js","../src/package/dingtalk-sdk-ship/index.js","../src/core/permissionJsApis.js","../src/core/bridge.js","../src/platforms/web/nativeEvent.js","../src/platforms/web/index.js","../src/platforms/weex/nativeEvent.js","../src/platforms/weex/index.js","../src/index.js"],"sourcesContent":["/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\nconst STATUS_NO_RESULT = '0';\nconst STATUS_OK = '1';\nconst STATUS_ERROR = '2';\n\nexport default function android_exec(exec,config){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\" && response.__status__) {\n        const status = response.__status__;\n        const message = response.__message__;\n        if (STATUS_OK === status){\n            win && win.call(context, message);\n        } else if (STATUS_ERROR === status){\n            fail && fail.call(context, message);\n        }\n      } else {\n        fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\nexport default function ios_exec(exec,config){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\") {\n        if ('0' === response.errorCode) {\n          win && win.call(context, response.result);\n        } else {\n          fail && fail.call(context, response.result);\n        }\n      }\n      else {\n          fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","function parse(qs, sep, eq){\n  const obj = Object.create(null);\n  if (typeof qs !== 'string' || qs.length === 0 ){\n    return obj;\n  }\n  sep = sep || '&';\n  eq = eq || '=';\n  const params = qs.split(sep);\n  let i = 0;\n  let l = params.length;\n  for(;i<l;i++){\n    let items = params[i].split(eq);\n    let queryKey = items[0].trim();\n    let queryVal = '';\n    if (items.length >= 3){\n      items.splice(0,1);\n      let lastIndex = items.length - 1;\n      items.forEach(function(v,i){\n        v = v.trim();\n        if (i === lastIndex){\n          queryVal += v;\n        } else {\n          queryVal += v + eq\n        }\n      });\n    } else {\n      queryVal = items[1].trim();\n    }\n    let cur = obj[queryKey];\n    if (cur){\n      if (Array.isArray(cur)){\n        cur.push(decodeURIComponent(queryVal));\n      } else {\n        let temp = cur;\n        obj[queryKey] = new Array();\n        obj[queryKey].push(temp);\n        obj[queryKey].push(decodeURIComponent(queryVal));\n      }\n    } else {\n      obj[queryKey] = decodeURIComponent(queryVal);\n    }\n  }\n  return obj;\n}\n\nfunction stringify(obj, sep, eq){\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj !== null && typeof obj === 'object'){\n    const keys = Object.keys(obj);\n    const len = keys.length;\n    const flast = len - 1;\n    let fields = '';\n    let i = 0;\n    for (;i<len; i++){\n      let k = keys[i];\n      let v = obj[k];\n      let ks = k + eq;\n      if (Array.isArray(v)){\n        let vlen = v.length;\n        let vlast = vlen - 1;\n        let j = 0;\n        for (; j < vlen; ++j) {\n           fields += ks + decodeURIComponent(v[j]);\n           if (j < vlast){\n             fields += sep;\n           }\n        }\n        if (vlen && i < flast){\n          fields += sep;\n        }\n      } else {\n        fields += ks + decodeURIComponent(v);\n        if (i < flast){\n          fields += sep;\n        }\n      }\n    }\n    return fields;\n  }\n  return '';\n}\n\nexport default {\n  stringify,\n  parse\n};\n","import querystring from '../dingtalk-querystring';\n\nfunction format(url, query){\n  let search = querystring.stringify(query);\n  return url + '?' + search;\n}\n\nfunction parse(url,parseQueryString){\n  let location = {\n    hash: null,\n    search: null\n  };\n  if (!url){\n    return {};\n  }\n  const searchIndex = url.indexOf('?');\n  if (searchIndex === -1){\n    return {};\n  }\n  const hashIndex = url.indexOf('#');\n  if (hashIndex > -1){\n    location.hash = url.slice(hashIndex);\n    location.search = url.slice(searchIndex, hashIndex);\n  } else {\n    location.search = url.slice(searchIndex);\n  }\n  const searchString = location.search.slice(1);\n  const query = querystring.parse(searchString);\n  if (typeof parseQueryString === 'string' && parseQueryString.length > 0){\n    return query[parseQueryString];\n  } else {\n    return query;\n  }\n}\n\nexport default {\n  format,\n  parse\n}\n","import url from '../dingtalk-url';\n\nfunction getEnv(){\n  let containerEnv = {};\n  if (typeof weex !== 'undefined'){\n    const config = weex.config;\n    const env = config.env;\n    containerEnv.platform = env.platform;\n    containerEnv.bundleFrameworkType = 'Vue';\n    if (containerEnv.platform !== 'Web'){\n      containerEnv.dingtalk = {\n        bundleUrl: config.bundleUrl,\n        originalUrl: config.originalUrl\n      };\n      containerEnv.appVersion = env.appVersion;\n      containerEnv.appName = env.appName;\n    } else {\n      // Vue Web\n      const href = location.href;\n      const tpl = url.parse(href,'dd_wx_tpl');\n      const _wx_tpl = url.parse(href,'_wx_tpl');\n      containerEnv.dingtalk = {\n        bundleUrl: tpl ? tpl : _wx_tpl ? _wx_tpl : '',\n        originalUrl: href\n      }\n    }\n  } else {\n    // Rax Weex\n    if (typeof callNative === 'function'){\n      containerEnv.platform = navigator.platform;\n      containerEnv.appName = navigator.appName;\n      containerEnv.appVersion = navigator.appVersion;\n      containerEnv.dingtalk = {\n        bundleUrl: __weex_options__.bundleUrl,\n        originalUrl: __weex_options__.originalUrl\n      };\n    } else {\n      // Rax Web\n      containerEnv.platform = 'Web';\n      const href = location.href;\n      const tpl = url.parse(href,'dd_wx_tpl');\n      const _wx_tpl = url.parse(href,'_wx_tpl');\n      containerEnv.dingtalk = {\n        bundleUrl: tpl ? tpl : _wx_tpl ? _wx_tpl : '',\n        originalUrl: href\n      }\n    }\n    containerEnv.bundleFrameworkType = 'Rax';\n  }\n  return containerEnv;\n}\n\nconst env = getEnv();\nconst isWeb = env.platform === 'Web';\nconst isWeexiOS = env.platform === 'iOS';\nconst isWeexAndroid = env.platform === 'android';\nconst isWeex = isWeexiOS || isWeexAndroid;\nconst { dingtalk, bundleFrameworkType } = env;\nconst { bundleUrl, originalUrl } = dingtalk;\n\nlet UA;\nif(isWeb){\n  UA = window.navigator.userAgent.toLowerCase();\n}\n\nconst isDingtalk = dingtalkContainer();\n\nfunction dingtalkContainer(){\n  if (isWeex){\n    if (env.appName === 'DingTalk' || env.appName === 'com.alibaba.android.rimet'){\n      return true;\n    }\n    return false;\n  } else {\n    return UA && UA.indexOf('dingtalk') > -1;\n  }\n}\n\nfunction webAndroid(){\n  if (isWeb){\n    return UA && UA.indexOf('android') > -1;\n  }\n  return null;\n}\n\nfunction webiOS(){\n  if (isWeb){\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n  }\n  return null;\n}\n\nfunction fetchVersion(){\n  if (isWeb){\n    let matches = UA.match(/aliapp\\(\\w+\\/([a-zA-Z0-9.-]+)\\)/);\n    if (matches === null) {\n        matches = UA.match(/dingtalk\\/([a-zA-Z0-9.-]+)/);\n    }\n    let version = matches && matches[1];\n    return version;\n  } else {\n    return env.appVersion;\n  }\n}\n\nconst isWebiOS = webiOS();\nconst isWebAndroid = webAndroid();\nconst version = fetchVersion();\n\nfunction toPlatform(){\n  let platform;\n  if(isDingtalk){\n    if (isWebAndroid){\n      platform = 'web.android';\n    } else if (isWebiOS) {\n      platform = 'web.ios';\n    } else if (isWeexAndroid){\n      platform = 'weex.android';\n    } else if (isWeexiOS){\n      platform = 'weex.ios';\n    }\n  } else {\n    platform = 'not.dingtalk'\n  }\n  return platform;\n}\n\nexport default {\n  isDingtalk,\n  isWeb,\n  isWebiOS,\n  isWebAndroid,\n  isWeex,\n  isWeexiOS,\n  isWeexAndroid,\n  bundleFrameworkType,\n  bundleUrl,\n  originalUrl,\n  version,\n  platform: toPlatform()\n};\n","import env from '../dingtalk-env';\n\nconst { bundleFrameworkType,isWeex } = env;\n\nexport default function requireModule(name){\n  if (isWeex){\n    if (bundleFrameworkType === 'Vue'){\n      return weex.requireModule(name);\n    } else {\n      let moduleName = '@weex-module/' + name;\n      return __weex_require__(moduleName);\n    }\n  } else {\n    if (bundleFrameworkType === 'Vue'){\n      return weex.requireModule(name);\n    }\n  }\n}\n","import requireModule from '../dingtalk-require';\nimport document from '../dingtalk-document';\nimport env from '../dingtalk-env';\n\nconst timer = requireModule('timer');\nconst { isWeex } = env;\n\nfunction setTimeout(handler,time){\n  if (isWeex){\n    timer.setTimeout(handler,time);\n    return document.taskCenter.callbackManager.lastCallbackId.toString();\n  } else {\n    return window.setTimeout(handler,time);\n  }\n}\n\nfunction clearTimeout(n){\n  if (isWeex){\n    timer.clearTimeout(n);\n  } else {\n    window.clearTimeout(n);\n  }\n}\n\nfunction setInterval(handler,time){\n  if (isWeex){\n    timer.setInterval(handler,time);\n    return document.taskCenter.callbackManager.lastCallbackId.toString();\n  } else {\n    return window.setInterval(handler,time);\n  }\n}\n\nfunction clearInterva(n){\n  if (isWeex){\n    timer.clearInterva(n);\n  } else {\n    window.clearInterva(n);\n  }\n}\n\nexport default {\n  setTimeout,\n  clearTimeout,\n  setInterval,\n  clearInterva\n};\n","const LOG = 'LOG';\nconst INFO = 'INFO';\nconst WARNING = 'WARNING';\nconst ERROR = 'ERROR';\n\nconst LogType = {\n  LOG,\n  INFO,\n  WARNING,\n  ERROR\n}\n\nfunction fillZore(str) {\n    const res = '00' + str;\n    return res.substring(res.length - 2);\n}\n\nlet logChannel = (logData) => {\n  const time = fillZore(logData.time.getHours())\n      + ':' + fillZore(logData.time.getMinutes())\n      + ':' + fillZore(logData.time.getSeconds());\n  switch (logData.type) {\n    case LogType.LOG:\n        console.log('time:'+ time +' | log: ', ...logData.logArr);\n      break;\n    case LogType.INFO:\n        console.info('time:'+ time + ' | info: ', ...logData.logArr);\n      break;\n    case LogType.ERROR:\n        console.error('time:'+ time +' | error: ', ...logData.logArr);\n      break;\n    case LogType.WARNING:\n        console.warn('time:'+ time +' | warning: ', ...logData.logArr);\n      break;\n    default:\n      break;\n  }\n};\n\nconst setLog = (fn) => {\n    logChannel = fn;\n};\n\nconst log = (logArr, type = LogType.LOG) => {\n  logChannel({\n    type,\n    logArr,\n    time: new Date(),\n  });\n};\n\nexport default {\n  log,\n  setLog,\n  LogType\n}\n","import dingQueryString from './package/dingtalk-querystring';\nimport dingUrl from './package/dingtalk-url';\nimport dingEnv from './package/dingtalk-env';\nimport dingCompareVersion from './package/dingtalk-version';\nimport dingRequireModule from './package/dingtalk-require';\nimport dingDocument from './package/dingtalk-document';\nimport dingTimer from './package/dingtalk-timer';\nimport dingLogger from './package/dingtalk-log';\nimport dingCallTransform from './package/dingtalk-callTransform';\n\nexport const querystring = dingQueryString;\nexport const url = dingUrl;\nexport const env = dingEnv;\nexport const compareVersion = dingCompareVersion;\nexport const requireModule = dingRequireModule;\nexport const document = dingDocument;\nexport const timer = dingTimer;\nexport const { log, setLog, LogType } = dingLogger;\nexport const { callTransform, setCallTransformSource } = dingCallTransform;\n\nexport default {\n  querystring,\n  url,\n  env,\n  compareVersion,\n  requireModule,\n  document,\n  timer,\n  LogType, \n  setLog, \n  log,\n  callTransform,\n  setCallTransformSource\n};","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\nimport { env } from 'dingtalk-javascript-utility';\n\nlet isAndroid = null;\nlet isIOS = null;\nlet bridgeReady = false;\nconst { isWeb } = env;\n\nif (isWeb){\n  const UA = window.navigator.userAgent.toLowerCase();\n  isAndroid = UA && UA.indexOf('android') > -1;\n  isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nfunction ios_exec(config){\n  const webViewJavascriptBridge = window._WebViewJavascriptBridge;\n  if (!webViewJavascriptBridge){\n    throw 'runtime and bridge are not ready';\n  }\n  const { body, onSuccess, onFail, context } = config;\n  webViewJavascriptBridge.callHandler('exec',body,function(response){\n    if (typeof response !== 'undefined'){\n      if ('0' === response.errorCode){\n        typeof onSuccess === 'function' && onSuccess.call(context,response.result);\n      } else {\n        typeof onFail === 'function' && onFail.call(context,response.result);\n      }\n    }\n    typeof onFail === 'function' && onFail.call('-1','');\n  });\n}\n\nfunction android_exec(config){\n  let { body, onSuccess, onFail, context } = config;\n  let { plugin, action, args } = body;\n  const webViewJavascriptBridge = window.WebViewJavascriptBridgeAndroid;\n  webViewJavascriptBridge(plugin, action, args, onSuccess, onFail, context);\n}\n\nfunction runAndroid(){\n  window.WebViewJavascriptBridgeAndroid = window.nuva.require();\n}\n\nexport default function web_exec(config){\n  if (isIOS){\n    if (window._WebViewJavascriptBridge){\n      ios_exec(config);\n    } else {\n      document.addEventListener('_WebViewJavascriptBridgeReady',function(){\n        ios_exec(config);\n      },false);\n    }\n  } else if (isAndroid) {\n    const win = window;\n    if (win.nuva && (win.nuva.isReady === undefined || win.nuva.isReady)){\n      if (!bridgeReady){\n        runAndroid();\n      }\n      android_exec(config);\n    } else {\n      document.addEventListener('runtimeready',function(){\n        if (!bridgeReady){\n          runAndroid();\n        }\n        android_exec(config);\n      },false);\n    }\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\nimport android_exec from './android_exec.js';\nimport ios_exec from './ios_exec.js';\nimport { env, requireModule } from 'dingtalk-javascript-utility';\nimport web_exec from './web_exec.js';\n\nlet nativeExec = null;\nconst { isWeex, isWeexiOS, isWeexAndroid } = env;\nif (isWeex){\n  nativeExec = requireModule('nuvajs-exec').exec;\n}\n\nfunction exec_affirm(plugin, action, args,onSuccess, onFail, context){\n  const body = {\n    plugin: plugin,\n    action: action,\n    args: args ? args : {}\n  }\n  const config = {\n    body: body,\n    onSuccess: onSuccess ? onSuccess : null,\n    onFail: onFail ? onFail : null,\n    context: context ? context : null\n  }\n  exec(config);\n}\n\nfunction exec(config) {\n  let native_exec = nativeExec ? nativeExec : function(){};\n  if (isWeexiOS){\n    ios_exec(native_exec,config);\n  } else if(isWeexAndroid) {\n    android_exec(native_exec,config);\n  } else {\n    web_exec(config);\n  }\n}\n\nexport default exec;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\nlet cat = {};\nlet EventEmitter = {\n  on: function(event,fun){\n    let cbs = cat[event];\n    cbs ? cbs.push(fun) : cat[event] = [];\n    if (!cbs) {\n      cat[event].push(fun);\n    }\n  },\n  off: function(event,fun){\n    let cbs = cat[event];\n    if (!cbs) {\n      return false;\n    }\n    if (!event && !fun) {\n      cat = {};\n      return true;\n    }\n    if (event && !fun) {\n      cat[event] = null;\n      return true;\n    }\n    let cb;\n    let i = cbs.length;\n    while(i--){\n      cb = cbs[i];\n      if (cb === fun || cb.fun === fun) {\n        cbs.splice(i,1);\n        break;\n      }\n    }\n    return true;\n  },\n  once: function(event,fun){\n    function _on(){\n      EventEmitter.off(event,_on);\n      fun.apply(this,arguments);\n    }\n    _on.fun = fun;\n    EventEmitter.on(event,_on);\n  },\n  emit: function(event){\n    let isString = typeof event === 'string';\n    if (!isString){\n      return;\n    }\n    let cbs = cat[event];\n    let args = toArray(arguments,1);\n    if (cbs) {\n      let i = 0;\n      let j = cbs.length;\n      for(;i<j;i++){\n        let cb = cbs[i];\n        cb.apply(this,args);\n      }\n    }\n  }\n};\n\nfunction toArray(list, index) {\n  let _index = index || 0;\n  let i = list.length - _index;\n  let _array = new Array(i);\n  while(i--){\n    _array[i] = list[i + _index]\n  }\n  return _array\n}\n\nexport default EventEmitter;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\nimport exec from 'dingtalk-sdk-exec';\n\nfunction createApi(_name,_action){\n  return function(params){\n    if (!params) {\n      params = {};\n    }\n    let onSuccess = params.onSuccess;\n    let onFail = params.onFail;\n    delete params.onSuccess;\n    delete params.onFail;\n    delete params.onCancel;\n    const config = {\n      body: {\n        plugin: _name,\n        action: _action,\n        args: params\n      },\n      onSuccess: onSuccess,\n      onFail: onFail\n    };\n    exec(config);\n  }\n}\n\nfunction createFuns(name,funs){\n  let s = Object.create(null);\n  funs.forEach(function(action){\n    s[action] = createApi(name, action);\n  });\n  return s;\n}\n\nexport default function parseJsApis(jsApis){\n  let apis = Object.create(null);\n  for (let name in jsApis) {\n    let node = name.split('.');\n    let funs = jsApis[name];\n    let staging = null;\n    let i = 0;\n    let j = node.length;\n    while (true) {\n      if (!staging) {\n        if (1 === j) {\n          let h = false;\n          let p = apis[node[i]];\n          let s = createFuns(name, funs);\n          for (let x in p){\n            if (p.hasOwnProperty(x)){\n              h = true;\n              break;\n            }\n          }\n          if (h){\n            for (let k in s){\n              p[k] = s[k];\n            }\n          } else {\n            apis[node[i]] = createFuns(name, funs);\n          }\n          break;\n        }\n        if (apis[node[i]]){\n          staging = apis[node[i]];\n          i++;\n          continue;\n        }\n        apis[node[i]] = {};\n        staging = apis[node[i]];\n        i++;\n        continue;\n      } else {\n        if ((j - 1) === i) {\n          staging[node[i]] = createFuns(name, funs);\n          break;\n        }\n        if (staging[node[i]]) {\n          i++;\n          continue;\n        }\n        staging[node[i]] = {};\n        staging = staging[node[i]];\n      }\n      i++;\n      if (i > j) {\n        break;\n      }\n    }\n  }\n\treturn apis;\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\nimport exec from 'dingtalk-sdk-exec';\nimport EventEmitter from './global-api/EventEmitter.js';\nimport parseJsApis from './core/parseJsApis.js';\nimport { env,requireModule,log, LogType } from 'dingtalk-javascript-utility';\n\nlet globalEvent = {};\nconst { isWeex } = env;\nif (isWeex){\n  globalEvent = requireModule('globalEvent');\n}\n\nfunction rtFunc(method){\n  return function(cb) {\n    const config = {\n      body: {\n        plugin: 'runtime',\n        action: method,\n        args: {}\n      },\n      onSuccess: function(response){\n        if (typeof cb === 'function'){\n          cb(response);\n        }\n      },\n      onFail: function(){\n\n      },\n      context: null\n    };\n    exec(config);\n  };\n}\n\nfunction initDingtalkRequire(cb){\n  rtFunc('getModules')(cb);\n}\n\nlet ship = {\n  getModules: null,\n  isReady: false,\n  runtime: {\n    info: rtFunc('info'),\n    _interceptBackButton: rtFunc('interceptBackButton'),\n    _interceptNavTitle: rtFunc('interceptNavTitle'),\n    _recoverNavTitle: rtFunc('recoverNavTitle'),\n    _getModules: rtFunc('getModules')\n  },\n  init: function(){\n    initDingtalkRequire(function(response){\n      if(response){\n        ship.isReady = true;\n        ship.apis = parseJsApis(response);\n        EventEmitter.emit('__ship_ready__');\n      }\n    });\n  },\n  ready: function(cb){\n    if (ship.isReady){\n      if (typeof cb === 'function'){\n        cb();\n      }\n    } else {\n      if (typeof cb === 'function'){\n        EventEmitter.once('__ship_ready__', function(){\n          cb();\n        });\n      }\n    }\n  },\n  on: function(type, handler){\n    globalEvent.addEventListener(type,function(e){\n      const event = {\n        preventDefault: function () {\n          log(['does not support preventDefault'],LogType.WARNING);\n        },\n        detail: e\n      };\n      handler.call(this,event);\n    });\n  },\n  off: globalEvent.removeEventListener,\n  EventEmitter: EventEmitter\n};\n\nexport default ship;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\nimport ship from 'dingtalk-sdk-ship';\n\nexport default function permissionJsApis(cb,jsApisConfig,errorCb){\n  if (!jsApisConfig){\n    ship.ready(function(){\n      cb(null);\n    });\n    return;\n  }\n  ship.ready(function(){\n    const permission = ship.apis.runtime.permission;\n    let apisConf =  jsApisConfig || {};\n    let errCb = errorCb || null;\n    apisConf.onSuccess = function(response){\n      cb(null, response);\n    };\n    apisConf.onFail = function(error){\n      if (typeof errCb === 'function'){\n        errCb(error);\n      } else {\n        cb(error, null);\n      }\n    };\n    permission.requestJsApis(apisConf);\n  });\n}\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\nimport ship from 'dingtalk-sdk-ship';\nimport { log, LogType } from 'dingtalk-javascript-utility';\nimport { extend } from 'shared/util.js';\nimport permissionJsApis from './permissionJsApis.js';\n\nlet dingtalkJsApisConfig = null;\nlet dingtalkQueue = null;\nlet dingtalkErrorCb = null;\nlet isReady = false;\n\nfunction performQueue (){\n  if (dingtalkQueue && dingtalkQueue.length > 0){\n    dingtalkQueue.forEach(function(task){\n      task();\n    });\n    dingtalkQueue.length = 0;\n  }\n}\n\nfunction initDingtalkSDK(){\n  let dingtalk = {\n    apis: {},\n    config: function(config){\n      if (!config){\n        log(['config is undefined,you must configure Dingtalk parameters'],LogType.WARNING);\n        return;\n      }\n      dingtalkJsApisConfig = config;\n    },\n    init: function(){\n      // 初始化一次\n      dingtalkQueue = [];\n      ship.init();\n      ship.ready(function(){\n        isReady = ship.isReady;\n        dingtalk.apis = ship.apis ? ship.apis : {};\n        performQueue();\n      });\n    },\n    ready: function(cb){\n      if (!cb || typeof cb !== 'function'){\n        log(['callback is undefined'],LogType.WARNING);\n        return;\n      }\n      if (isReady){\n        permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n      } else {\n        function bufferFunction(cb){\n          return function(){\n            permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n          }\n        }\n        dingtalkQueue && dingtalkQueue.push(bufferFunction(cb));\n      }\n    },\n    error: function(cb){\n      if (typeof cb === 'function'){\n        dingtalkErrorCb = cb;\n      }\n    },\n    EventEmitter: ship.EventEmitter\n  };\n  return dingtalk;\n}\n\nexport default initDingtalkSDK;\n","\nfunction installNativeEvent(dingtalk){\n  dingtalk.on = function(type, listener, useCapture){\n    document.addEventListener(type, listener, useCapture);\n  }\n  dingtalk.off = function(type, listener, useCapture){\n    document.removeEventListener(type, listener, useCapture);\n  }\n}\n\nexport default installNativeEvent;\n","import initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWebDingtalkSDK(){\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWebDingtalkSDK;\n","import ship from 'dingtalk-sdk-ship';\n\nfunction installNativeEvent(dingtalk){\n  dingtalk.on = ship.on;\n  dingtalk.off = ship.off;\n}\n\nexport default installNativeEvent;\n","\nimport initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWeexDingtalkSDK(){\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWeexDingtalkSDK;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\nimport initWebDingtalkSDK from './platforms/web/index.js';\nimport initWeexDingtalkSDK from './platforms/weex/index.js';\nimport { log, LogType, env } from 'dingtalk-javascript-utility';\n\nlet initCtrl = true;\nlet dingtalkSDK = {};\nconst { isDingtalk, isWeex, isWeb } = env;\n\nlog(['current environment: ' + env.platform]);\n\nif (isDingtalk){\n  if (initCtrl){\n    initCtrl = false;\n    if (isWeex){\n      dingtalkSDK = initWeexDingtalkSDK();\n    } else if (isWeb){\n      dingtalkSDK = initWebDingtalkSDK();\n    }\n    dingtalkSDK.init();\n  }\n} else {\n  log(['can only open the page be Dingtalk Container'],LogType.WARNING);\n}\n\nexport default dingtalkSDK;\n"],"names":["STATUS_OK","STATUS_ERROR","android_exec","exec","config","body","win","onSuccess","fail","onFail","context","response","__status__","status","message","__message__","call","ios_exec","errorCode","result","parse","qs","sep","eq","obj","Object","create","length","params","split","i","l","items","queryKey","trim","queryVal","splice","lastIndex","forEach","v","cur","Array","isArray","push","decodeURIComponent","temp","stringify","keys","len","flast","fields","k","ks","vlen","vlast","j","format","url","query","search","querystring","parseQueryString","location","searchIndex","indexOf","hashIndex","hash","slice","searchString","getEnv","containerEnv","weex","env","platform","bundleFrameworkType","dingtalk","bundleUrl","originalUrl","appVersion","appName","href","tpl","_wx_tpl","callNative","navigator","__weex_options__","isWeb","isWeexiOS","isWeexAndroid","isWeex","UA","window","userAgent","toLowerCase","isDingtalk","dingtalkContainer","webAndroid","webiOS","test","fetchVersion","matches","match","version","isWebiOS","isWebAndroid","toPlatform","requireModule","name","moduleName","__weex_require__","timer","LOG","INFO","WARNING","ERROR","LogType","fillZore","str","res","substring","logChannel","logData","time","getHours","getMinutes","getSeconds","type","log","logArr","info","error","warn","setLog","fn","Date","dingEnv","dingCompareVersion","dingRequireModule","document","dingDocument","dingLogger","isAndroid","isIOS","bridgeReady","webViewJavascriptBridge","_WebViewJavascriptBridge","callHandler","plugin","action","args","WebViewJavascriptBridgeAndroid","runAndroid","nuva","require","web_exec","addEventListener","isReady","undefined","nativeExec","native_exec","cat","EventEmitter","event","fun","cbs","cb","_on","off","apply","arguments","on","isString","toArray","list","index","_index","_array","createApi","_name","_action","onCancel","createFuns","funs","s","parseJsApis","jsApis","apis","node","staging","h","p","x","hasOwnProperty","globalEvent","rtFunc","method","initDingtalkRequire","ship","emit","once","handler","e","removeEventListener","permissionJsApis","jsApisConfig","errorCb","ready","permission","runtime","apisConf","errCb","requestJsApis","dingtalkJsApisConfig","dingtalkQueue","dingtalkErrorCb","performQueue","task","initDingtalkSDK","init","bufferFunction","installNativeEvent","listener","useCapture","initWebDingtalkSDK","initWeexDingtalkSDK","initCtrl","dingtalkSDK"],"mappings":"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"}