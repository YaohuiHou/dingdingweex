{"version":3,"sources":["../../src/dingtalk-querystring/index.js"],"names":["parse","qs","sep","eq","obj","Object","create","length","params","split","i","l","items","queryKey","trim","queryVal","splice","lastIndex","forEach","v","cur","Array","isArray","push","decodeURIComponent","temp","stringify","keys","len","flast","fields","k","ks","vlen","vlast","j"],"mappings":"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","file":"index.js","sourcesContent":["function parse(qs, sep, eq){\n  const obj = Object.create(null);\n  if (typeof qs !== 'string' || qs.length === 0 ){\n    return obj;\n  }\n  sep = sep || '&';\n  eq = eq || '=';\n  const params = qs.split(sep);\n  let i = 0;\n  let l = params.length;\n  for(;i<l;i++){\n    let items = params[i].split(eq);\n    let queryKey = items[0].trim();\n    let queryVal = '';\n    if (items.length >= 3){\n      items.splice(0,1);\n      let lastIndex = items.length - 1;\n      items.forEach(function(v,i){\n        v = v.trim();\n        if (i === lastIndex){\n          queryVal += v;\n        } else {\n          queryVal += v + eq\n        }\n      });\n    } else {\n      queryVal = items[1].trim();\n    }\n    let cur = obj[queryKey];\n    if (cur){\n      if (Array.isArray(cur)){\n        cur.push(decodeURIComponent(queryVal));\n      } else {\n        let temp = cur;\n        obj[queryKey] = new Array();\n        obj[queryKey].push(temp);\n        obj[queryKey].push(decodeURIComponent(queryVal));\n      }\n    } else {\n      obj[queryKey] = decodeURIComponent(queryVal);\n    }\n  }\n  return obj;\n}\n\nfunction stringify(obj, sep, eq){\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj !== null && typeof obj === 'object'){\n    const keys = Object.keys(obj);\n    const len = keys.length;\n    const flast = len - 1;\n    let fields = '';\n    let i = 0;\n    for (;i<len; i++){\n      let k = keys[i];\n      let v = obj[k];\n      let ks = k + eq;\n      if (Array.isArray(v)){\n        let vlen = v.length;\n        let vlast = vlen - 1;\n        let j = 0;\n        for (; j < vlen; ++j) {\n           fields += ks + decodeURIComponent(v[j]);\n           if (j < vlast){\n             fields += sep;\n           }\n        }\n        if (vlen && i < flast){\n          fields += sep;\n        }\n      } else {\n        fields += ks + decodeURIComponent(v);\n        if (i < flast){\n          fields += sep;\n        }\n      }\n    }\n    return fields;\n  }\n  return '';\n}\n\nexport default {\n  stringify,\n  parse\n};\n"]}